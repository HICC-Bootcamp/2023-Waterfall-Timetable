<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>
</head>
<body>
<div style="text-align:center" > 출석:Y 결석:N 지각:L
    <br><br>
    번호 &nbsp; 출결
    <br>
        <form method="post">
        <script>
            function validate(e) {

                console.log('validate');
                if (e.value != 'Y' && e.value != 'N' && e.value != 'L') {
                    e.value = '';
                }

            }

            for (var i = 1; i < 31; i++) {
                document.write("<label for='" + i + "student'>");
                document.write(i + '&nbsp; &nbsp; &nbsp;');
                document.write("</label>");
                document.write("<input type='text' name='attend' size='1' maxlength='1'>");

                document.write("<br>");
                //$(documen(/[^YNL]/gi, ""));
                //});t).on("keyup", "input[attendOnly]", function () {
                //    $(this).val($(this).val().replace
                let attend = document.getElementsByName('attend')[i - 1];
                let data = {{
                    data | tojson
                }}[i - 1];
                console.log(data);
                attend.value = data
                attend.addEventListener('input', function (e) {
                    if (attend.value != 'Y' && attend.value != 'N' && attend.value != 'L') {
                        console.log(attend.value + ' validate');
                        attend.value = '';
                    }
                });

            }
        </script>
        <script>

            $(function() {
                $("#on").click(function submitdata(e) {
                    e.preventDefault();
                    let submit_elements = document.getElementsByName("attend");
                    let submit_result = [];

                    for (var i = 0; i < submit_elements.length; i++) {
                        submit_result[i] = submit_elements[i].value;
                    }

                    let submit_result_to_json = {
                        "submit_result": submit_result
                    }
                    functionn(submit_result_to_json);
            });
            });

            function functionn(submit_result){
                    $.ajax({
                        url: "/myfunction",
                        type: "POST",
                        contentType: 'application/json; charset = utf-8',
                        datatype: 'json',
                        data:
                            JSON.stringify(submit_result),
                        success: function(response){
                            console.log(response);
                            window.location.replace('/Teacherpage/4/');
                        },
                        error: function(error){
                            console.log(error);

                    }})
                }

        </script>
            <BR><BR>
            <button id="on" type="button">저장</button>
    </form>
    <br><br>

</div>
</body>
</html>